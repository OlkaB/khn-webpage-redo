(function() {
    "use strict";
    bindEventToSelectors('.theme-panel, .closeSubpage', manageView);
    document.querySelector('.mobileMenuIcon').addEventListener('click', toggleClassOnSelectors.bind(null, '.wrapper.nav', 'open'));
    bindEventToSelectors('.navPane-item', switchPagesViaMenu);
    var themePanelsAndMain = document.querySelectorAll('.theme-panel, main');
    var main = document.querySelector('main');
    var panelsWrapper = document.querySelector('.wrapper.panels');
    var subPages = document.querySelectorAll('.subpage');
    var footer = document.querySelector('footer');

    function bindEventToSelectors(selectorsString, callback) {
        [].forEach.call(document.querySelectorAll(selectorsString), function(selector) { selector.addEventListener('click', callback) }) }

    function toggleClassOnSelectors(selectorsToToggle, classToToggle) { var selectors = document.querySelectorAll(selectorsToToggle); if (selectors.length > 0) {
            [].forEach.call(selectors, function(selector) { selector.classList.toggle(classToToggle) }) } }

    function manageView() {
        console.log('manageViewByPanels_event: ', event.target.classList);
        if (main.classList.contains('collapsed')) { togglePanles(!1);
            toggleSubpages(!0); if (innerWidth < 900 && footer.classList.contains('bottomPosition')) { footer.classList.remove('bottomPosition') } } else {
            if (event.target.classList.contains('theme-panel') || event.target.classList.contains('themePanelText')) { togglePanles(!0, event.target.classList[1]); var subPageToShow = event.target.classList[1] === "personalTraining" ? "personalTraining" : "underConstruction";
                toggleSubpages(!0, subPageToShow) } else if (event.target.classList.contains('closeSubpage')) { toggleSubpages(!0) }
            if (innerWidth < 900 && !footer.classList.contains('bottomPosition')) { footer.classList.add('bottomPosition') }
        }
    }

    function switchPagesViaMenu() {
        console.log('Target to page: ', event.target.innerText, event.target.innerText === 'SPORTY');
        if (event.target.innerText.match(/sporty/i) !== null) { togglePanles(!1);
            toggleSubpages(!0); if (innerWidth < 900 && footer.classList.contains('bottomPosition')) { footer.classList.remove('bottomPosition') } } else {
            toggleSubpages(!0, 'underConstruction');
            if (!panelsWrapper.classList.contains('hidden')) { panelsWrapper.classList.add('hidden') }
            if (innerWidth < 900 && !footer.classList.contains('bottomPosition')) { footer.classList.add('bottomPosition') }
        }
    }

    function togglePanles(shouldCollapseBool, leaveExpandedPanel) {
        if (panelsWrapper.classList.contains('hidden')) { panelsWrapper.classList.remove('hidden') }[].forEach.call(themePanelsAndMain, function(selector) {
            if (selector.classList.contains(leaveExpandedPanel)) { return }
            if (selector.classList.contains('collapsed') && !shouldCollapseBool) { selector.classList.remove('collapsed'); return }
            if (!selector.classList.contains('collapsed') && shouldCollapseBool) { selector.classList.add('collapsed'); return }
        })
    }

    function toggleSubpages(shouldHideBool, leaveVisiblePage) {
        [].forEach.call(subPages, function(selector) {
            if (selector.classList.contains(leaveVisiblePage) && selector.classList.contains('hidden')) { selector.classList.remove('hidden'); return }
            if (selector.classList.contains('hidden') && !shouldHideBool && !selector.classList.contains(leaveVisiblePage)) { selector.classList.remove('hidden'); return }
            if (!selector.classList.contains('hidden') && shouldHideBool && !selector.classList.contains(leaveVisiblePage)) { selector.classList.add('hidden'); return }
        })
    }
}())